# Pages Extension for Tiptap

The **Pages** extension brings advanced pagination, page formatting, and print-like layout to your Tiptap editor. It supports real-world page sizes, customizable headers and footers, and more—making it ideal for document editing, print previews, and professional publishing workflows.

---

## Features

- **True pagination**: Split your document into visual pages with configurable gaps.
- **Real-world page formats**: A4, Letter, Legal, Tabloid, and more.
- **Customizable headers & footers**: Left, center, right; static text or dynamic functions; page numbers supported.
- **Utility functions**: Convert between cm and pixels (for internal use).
- **Automatic CSS injection**: Styles for print-like appearance.
- **ProseMirror plugin integration**: Handles page decorations and updates.

---

## Installation

```bash
npm install @tiptap-pro/extension-pages@alpha
```

---

## Usage

### Basic Example

```typescript
import { Editor } from '@tiptap/core'
import { Pages, PAGE_FORMATS } from '@tiptap-pro/extension-pages'

const editor = new Editor({
  extensions: [
    Pages.configure({
      pageFormat: 'A4', // Predefined format (see below)
      pageGap: 50, // Gap between pages in px (default: 50)
      headerHeight: 50, // Header height in px (default: 50)
      footerHeight: 50, // Footer height in px (default: 50)
      header: 'My Document',
      footer: 'Page {page} of {total}',
      pageBreakBackground: '#fff', // Optional: background color for page breaks
    }),
  ],
})
```

### Dynamic Header/Footer Content

You can use a function for any header/footer position:

```typescript
Pages.configure({
  pageFormat: 'Letter',
  header: (page, total) => `Page ${page} of ${total}`,
  footer: page => (page === 1 ? 'Confidential' : ''),
})
```

---

## Configuration Options

| Option                | Type / Values        | Default  | Description                                              |
| --------------------- | -------------------- | -------- | -------------------------------------------------------- |
| `pageFormat`          | `'A4' \| 'A3' ...`   | `'A4'`   | Predefined page format (see below for all formats)       |
| `headerHeight`        | `number` (px)        | `50`     | Header height in pixels                                  |
| `footerHeight`        | `number` (px)        | `50`     | Footer height in pixels                                  |
| `pageGap`             | `number` (px)        | `50`     | Gap between pages in pixels                              |
| `header`              | `string \| fn`       | `''`     | Header left content; string or `(page, total) => string` |
| `footer`              | `string \| fn`       | `''`     | Footer left content; string or `(page, total) => string` |
| `pageBreakBackground` | `string` (CSS color) | `'#fff'` | Background color for page breaks                         |

**Note:**

- Header/footer content can be a string (supports `{page}` and `{total}` tokens) or a function `(pageNumber, totalPages) => string`.
- Margins and page size are determined by the selected `pageFormat` and are not user-configurable.

---

## Available Page Formats

| Name      | Dimensions (cm) | Dimensions (px @ 96dpi) | Margins (cm: top, right, bottom, left) |
| --------- | --------------- | ----------------------- | -------------------------------------- |
| `A4`      | 21.0 × 29.7     | 794 × 1123              | 2.5, 2.0, 2.5, 2.0                     |
| `A3`      | 29.7 × 42.0     | 1123 × 1587             | 2.5, 2.0, 2.5, 2.0                     |
| `A5`      | 14.8 × 21.0     | 559 × 794               | 2.0, 1.5, 2.0, 1.5                     |
| `Letter`  | 21.59 × 27.94   | 816 × 1063              | 2.54, 2.54, 2.54, 2.54                 |
| `Legal`   | 21.59 × 35.56   | 816 × 1346              | 2.54, 2.54, 2.54, 2.54                 |
| `Tabloid` | 27.94 × 43.18   | 1063 × 1634             | 2.54, 2.54, 2.54, 2.54                 |

Each format comes with sensible default margins and sizes. These are not user-configurable.

---

## Header & Footer Templating

- **String templates**: Use `{page}` for current page, `{total}` for total pages.
  - Example: `'Page {page} of {total}'`
- **Functions**: Provide a function `(pageNumber, totalPages) => string` for dynamic content.
  - Example: `(page, total) => page === 1 ? 'Cover' : `Page ${page}``

---

## How It Works

- **DOM & CSS**: The extension injects styles and adds classes for print-like appearance. It uses a MutationObserver to keep pagination in sync with content changes.
- **ProseMirror Plugin**: Handles page decorations, headers, footers, and updates them as you edit.
- **No runtime dependencies**: All logic is self-contained.

---

## License

This extension is proprietary and closed source. All rights reserved. Redistribution or use of the code is not permitted without explicit permission from the authors.
